{% extends 'voting/base.html' %}

{% block title %}{{ election.title }} - E-Voting System{% endblock %}

{% block content %}
<div style="margin-bottom: 20px;">
    <a href="{% url 'election_list' %}" style="color: #667eea; text-decoration: none;">‚Üê Back to Elections</a>
</div>

<h2 style="color: #667eea; margin-bottom: 20px;">{{ election.title }}</h2>

<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
    <p style="color: #666; margin-bottom: 15px;">{{ election.description }}</p>
    <div style="color: #666;">
        <strong>Start Date:</strong> {{ election.start_date|date:"M d, Y - h:i A" }}<br>
        <strong>End Date:</strong> {{ election.end_date|date:"M d, Y - h:i A" }}<br>
        <strong>Status:</strong> 
        {% if is_ongoing %}
            <span style="color: #28a745; font-weight: bold;">Active - Voting Open</span>
        {% else %}
            <span style="color: #dc3545; font-weight: bold;">Closed</span>
        {% endif %}
    </div>
</div>

<h3 style="color: #333; margin-bottom: 20px;">Candidates</h3>

{% if candidates %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
        {% for candidate in candidates %}
            <div style="background: white; border: 2px solid #dee2e6; padding: 20px; border-radius: 8px; text-align: center;">
                {% if candidate.photo %}
                    <img src="{{ candidate.photo.url }}" alt="{{ candidate.name }}" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-bottom: 15px;">
                {% else %}
                    <div style="width: 100px; height: 100px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; color: white; font-size: 40px;">
                        {{ candidate.name|first|upper }}
                    </div>
                {% endif %}
                <h4 style="color: #667eea; margin-bottom: 10px;">{{ candidate.name }}</h4>
                <p style="color: #666; margin-bottom: 15px;">{{ candidate.description|default:"No description available" }}</p>
                <p style="color: #28a745; font-weight: bold;">Votes: {{ candidate.vote_count }}</p>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p style="color: #666; text-align: center; padding: 40px;">No candidates registered for this election.</p>
{% endif %}

<div style="text-align: center; margin-top: 30px;">
    {% if is_ongoing %}
        <a href="{% url 'vote' election.id %}" class="btn" style="background: #28a745; font-size: 18px; padding: 15px 30px;">Cast Your Vote</a>
    {% endif %}
    <a href="{% url 'results' election.id %}" class="btn btn-secondary" style="margin-left: 10px; font-size: 18px; padding: 15px 30px;">View Results</a>
</div>
{% endblock %}
